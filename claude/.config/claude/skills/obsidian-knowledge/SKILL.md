---
name: obsidian-knowledge
description: Obsidianのフォルダ構造を分析し、ナレッジを適切な場所に自動分類して追加・更新する。「Obsidianに追加して」「Obsidianに追記して」「ナレッジにして」「メモしておいて」などの指示で起動。
allowed-tools: mcp__obsidian-mcp-tools__*, Read
---

# Obsidian ナレッジ管理

ユーザーの入力からナレッジを抽出し、Obsidian Vaultの適切なフォルダに自動分類して保存する。

## Vault構造

```
/Users/koki/Documents/notes/
├── 000_Inbox/       # 未整理・一時保存
├── 010_Daily/       # デイリーノート
├── 020_Ideas/       # アイデア・思いつき
├── 030_Knowledge/   # 知識・学習内容
│   ├── Claude Code/
│   ├── TypeScript/
│   ├── クリーンアーキテクチャ/
│   └── (新規サブフォルダ作成可)
├── 040_Projects/    # プロジェクト関連
├── 999_Archives/    # アーカイブ
└── 999_Templates/   # テンプレート
```

## 分類ルール

| フォルダ | 内容 |
|---------|------|
| 000_Inbox | 分類が不明確なもの、後で整理するもの |
| 010_Daily | 日記、その日の振り返り |
| 020_Ideas | アイデア、思いつき、試したいこと |
| 030_Knowledge | 技術知識、学んだこと、ベストプラクティス |
| 040_Projects | 特定プロジェクトに関連する情報 |

### 030_Knowledge のサブフォルダ判断

1. 既存サブフォルダに該当するか確認
2. 該当しない場合、適切な新規サブフォルダを作成
3. 技術トピック（言語、フレームワーク、ツール等）で分類

## ファイル命名規則

```
YYYY-MM-DD_タイトル.md
```

例: `2025-02-04_APIの設計パターン.md`

## フロントマター形式

```yaml
---
tags:
  - タグ1
  - タグ2
---
```

## 処理フロー

```
1. ユーザー入力を解析
   ↓
2. 操作を判断（追加/更新/追記/削除）
   ↓
3. 分類先フォルダを決定
   - list_vault_files で既存構造を確認
   - 内容に最適なフォルダを選択
   ↓
4. ファイル名を生成（日付 + タイトル）
   ↓
5. 既存ファイルの有無を確認
   - 存在する場合: 更新or追記
   - 存在しない場合: 新規作成
   ↓
6. 適切なツールで実行
   - create_vault_file: 新規作成
   - patch_vault_file: 部分更新
   - append_to_vault_file: 追記
```

## 操作の自動判断

| ユーザーの表現 | 操作 |
|---------------|------|
| 「追加して」「保存して」「ナレッジにして」 | 新規作成 |
| 「更新して」「修正して」「書き換えて」 | 更新 |
| 「追記して」「足して」「付け加えて」 | 追記 |
| 「削除して」「消して」 | 削除（確認必須） |
| 表現なし | 内容から自動判断 |

## 使用例

### 新規ナレッジの追加

```
ユーザー: 「APIの命名規則について学んだことをナレッジにして」

→ 030_Knowledge/ に分類
→ 既存サブフォルダ確認 → API関連がなければ新規作成
→ 2025-02-04_APIの命名規則.md として保存
```

### 既存ナレッジへの追記

```
ユーザー: 「TypeScriptのユーティリティ型について追記して」

→ 030_Knowledge/TypeScript/ を検索
→ 該当ファイルに追記、または新規作成
```

## 注意事項

- 削除操作は必ずユーザーに確認を取る
- 大きな変更の場合は変更内容をプレビューする
- タグは内容から自動推論する（3-5個程度）
