# 🧠 グローバルメモリ設定（CLAUDE.md）

このファイルは、すべてのClaude Codeセッションに適用される個人の設定やルールを記述します。

---

## 🌐 言語と出力形式

- すべての回答は日本語で行うこと。
- コードの説明や出力は、マークダウン形式で提供すること。

---

## 🧑‍💻 コーディングスタイル

- 関数やクラスには適切なコメントを付けること。

---

## ⚠️ 注意事項

- セキュリティ上の理由から、機密情報（APIキーやパスワードなど）はコードにハードコーディングしないこと。
- 外部ライブラリを追加する際は、ライセンスを確認し、必要に応じてチームに共有すること。

---

## 📝 コミットメッセージ生成ルール

以下のルールに従って、日本語のコミットメッセージを生成してください。

### コミット前のlint実行

**重要**: コミットする前に必ず以下の手順でlintを実行してください。

1. **利用可能なlintコマンドの確認**:
   ```bash
   npm run
   ```
   または package.json の scripts セクションを確認

2. **lintの実行**:
   ```bash
   npm run lint
   ```
   プロジェクトによっては以下のコマンドも確認：
   - `npm run typecheck` (TypeScriptの型チェック)
   - `npm run format` (コードフォーマット)
   - `npm run test` (テスト実行)

3. **lintエラーの修正**:
   - エラーが出た場合は、コミット前に必ず修正
   - 自動修正可能な場合: `npm run lint -- --fix`
   - 手動修正が必要な場合: エラーメッセージに従って修正

4. **修正後の再確認**:
   ```bash
   npm run lint
   ```
   エラーがなくなるまで繰り返す

### 基本ルール

- **メッセージは日本語で書いてください。**
- **コミットメッセージの先頭に、変更の種類に応じた絵文字とプレフィックス（分類）を必ず付けてください。**
- **主語は「変更されたコンポーネントや機能」を意識してください。**
- **1行目で変更内容を要約してください（サマリー行）。**
- **絵文字とプレフィックスは、サマリー行にのみ付けてください。**
- **詳細な説明が必要な場合は、空行を挟んで2行目以降に記述してください。**
- **詳細説明では箇条書きや複数行の説明を許可しますが、冗長な説明は禁止です。**

### 絵文字とプレフィックス一覧（変更種別）

| 絵文字 | プレフィックス | 内容 | 例 |
|--------|----------------|------|-----|
| :+1:   | feat           | **機能・要素の追加、新しい振る舞い、改善** | :+1: feat: ユーザー登録ページを追加 |
| :bug:  | fix            | バグ修正、不具合対応 | :bug: fix: ログイン時に発生するバリデーションエラーを修正 |
| :books:| docs           | ドキュメントの追加・修正 | :books: docs: API仕様の記述をREADMEに追加 |
| :sparkles: | style      | スタイルやフォーマットの調整（動作に影響しない） | :sparkles: style: コード整形と不要な空行を削除 |
| :hammer: | refactor     | **既存機能を変更せず内部構造のみ改善** | :hammer: refactor: 重複コードを共通関数に抽出 |
| :rocket: | perf         | パフォーマンス改善 | :rocket: perf: リスト表示のレンダリング速度を向上 |
| :test_tube: | test      | テストの追加・修正 | :test_tube: test: バリデーションユーティリティのテストを追加 |
| :construction_worker: | build | ビルド構成・依存関係の調整 | :construction_worker: build: webpackの設定を変更 |
| :robot: | ci            | CI/CD構成の変更 | :robot: ci: CircleCIのジョブを修正 |
| :wrench: | chore        | 雑務的な作業（設定・依存更新など） | :wrench: chore: TypeScriptのバージョンを更新 |
| :rewind: | revert       | 以前のコミットを元に戻す | :rewind: revert: 不具合のあったレイアウト変更を取り消し |

### 判断基準の明確化

**feat（機能追加）に該当するケース：**
- 新しいコンポーネント・関数・クラスの追加
- 既存UIに新しいボタン・フィールド・機能を追加
- 新しいAPI呼び出しやデータ取得機能
- ユーザーが直接体験する新しい動作・操作
- 新しいバリデーション・計算ロジック
- 新しい表示項目やレイアウト要素
- エラーハンドリングの追加・向上

**refactor（リファクタリング）に該当するケース：**
- 既存機能の動作を変えず、コード構造のみ改善
- 重複コードの共通化
- 変数名・関数名の変更（動作変更なし）
- ファイル分割・統合（機能変更なし）

### 判断に迷うケースの例

| 変更内容 | 分類 | 理由 |
|----------|------|------|
| 新しいボタンを追加 | :+1: feat | ユーザーが体験する新機能 |
| 既存ボタンのスタイル変更 | :+1: feat | 見た目の改善もユーザー価値 |
| フォームにバリデーション追加 | :+1: feat | 新しいユーザー体験 |
| useState → useReducer変更 | :hammer: refactor | 動作変更なし、内部実装のみ |
| エラーメッセージを追加 | :+1: feat | ユーザー体験の向上 |
| console.log削除 | :sparkles: style | コード整理 |
| 型定義を追加 | :+1: feat | 開発体験の向上 |
| APIレスポンス形式変更対応 | :+1: feat | 新しいデータ対応 |

### 書き方の指針

**サマリー行（1行目）の指針：**
- **50文字以内で記述してください。**
- **変更は「コンポーネント単位」または「機能単位」で記述してください。**
  - ✅ OK: 「ユーザーカード表示機能を追加」
  - ❌ NG: 「ユーザーカードコンポーネントのレイアウトを修正し、表示ロジックを改善して使いやすさを向上」
- **動詞は最後に配置してください。**
  - ✅ OK: 「翻訳機能を追加」
  - ❌ NG: 「追加した翻訳機能」
- **曖昧な言葉（例：とりあえず、ちょっと、いくつか）は禁止です。**

**詳細説明（2行目以降）の指針：**
- **複数の変更点がある場合は箇条書きで記述可能です。**
- **変更の背景や理由を簡潔に説明できます。**
- **1つの変更点につき1行程度を目安とし、冗長な説明は避けてください。**

### 運用例

#### 良い例（推奨）
```text
:+1: feat: 翻訳機能を追加
:bug: fix: ログインエラーを修正
:hammer: refactor: 共通関数を抽出
:sparkles: style: コードを整形
```

#### 悪い例（冗長・複雑）
```text
❌ :+1: feat: カスタムメッセージの翻訳機能と元に戻す機能を実装し、ユーザー体験を向上
❌ :bug: fix: ユーザーがログインする際に発生していたバリデーションエラーの問題を解決
❌ :hammer: refactor: コードの可読性を向上させるために共通関数に抽出し、重複を削除
```

